<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ssm.dao.AttendanceDao">
  <resultMap id="AttendanceMap" type="com.ssm.pojo.Attendance">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="Attendance_Id"  property="attendanceId" />
    <result column="STUDENT_ID"  property="studentId" />
    <result column="STUDENT_NAME"  property="studentName" />
    <result column="CLASS_ID"  property="classId" />
    <result column="CLASS_NAME"  property="className" />
    <result column="attendance_date"  property="attendanceDate" />
    <result column="status"  property="status" />
    <!-- 一对一 -->
    <!--<association property="className" column="CLASS_ID" select="com.ssm.mappers.ClasssMapper.getClassNameById" />-->
  <!-- 一对多-->
    <!--<collection property="className" column="CLASS_ID"  select="com.ssm.mappers.ClasssMapper.getClassNameById"></collection>-->
  </resultMap>
  <select id="getAttList" resultMap="AttendanceMap" >
    select a.*,s.student_name,c.class_name from classs c, student s, attendance a where c.class_id = s.class_id and a.student_id = s.student_id
  </select>
  <delete id="delStuById" parameterType="java.lang.Integer">
    delete from STUDENT
    where STUDENT_ID = #{studentId}
  </delete>
  <insert id="addAtt" parameterType="com.ssm.pojo.Attendance">
    insert into Attendance (Attendance_ID, STUDENT_ID, CLASS_ID,
      Attendance_date,status)
    values (seq_attendance_id.nextval, #{studentId}, #{classId},
      #{attendanceDate},#{status})
  </insert>
  <update id="updateAtt" parameterType="com.ssm.pojo.Attendance">
    update attendance set status=#{status} where attendance_id=#{attendanceId}
  </update>
  <select id="getAttById" resultMap="AttendanceMap">
    select a.*,s.student_name,c.class_name from classs c, student s, attendance a where c.class_id = s.class_id and a.student_id = s.student_id and attendance_id=#{attendanceId}
  </select>
</mapper>