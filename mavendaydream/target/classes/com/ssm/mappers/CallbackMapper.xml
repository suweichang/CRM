<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ssm.dao.CallbackDao">
  <resultMap id="CallbackMap" type="com.ssm.pojo.Callback">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="Callback_Id"  property="callbackId" />
    <result column="STUDENT_ID"  property="studentId" />
    <result column="STUDENT_NAME"  property="studentName" />
    <result column="Callback_date"  property="callbackDate" />
    <result column="Callback_Content"  property="callbackContent" />
    <result column="photo"  property="photo" />
    <!-- 一对一 -->
    <!--<association property="className" column="CLASS_ID" select="com.ssm.mappers.ClasssMapper.getClassNameById" />-->
  <!-- 一对多-->
    <!--<collection property="className" column="CLASS_ID"  select="com.ssm.mappers.ClasssMapper.getClassNameById"></collection>-->
  </resultMap>
  <select id="getCbList" resultMap="CallbackMap" >
    select ca.*,s.student_name,c.class_name from classs c, student s, callback ca where c.class_id = s.class_id and ca.student_id = s.student_id
  </select>
  <delete id="delStuById" parameterType="java.lang.Integer">
    delete from STUDENT
    where STUDENT_ID = #{studentId}
  </delete>
  <insert id="addCb" parameterType="com.ssm.pojo.Callback">
    insert into callback (callback_ID, callback_date, callback_content,
      student_id,photo)
    values (seq_callback_id.nextval, #{callbackDate}, #{callbackContent},
      #{studentId},#{photo})
  </insert>
  <update id="updateCb" parameterType="com.ssm.pojo.Callback">
    update callback set callback_content=#{callbackContent} where callback_id=#{callbackId}
  </update>
  <select id="getCbById" resultMap="CallbackMap">
    select ca.*,s.student_name,c.class_name from classs c, student s, callback ca where c.class_id = s.class_id and ca.student_id = s.student_id and ca.callback_id=#{callbackId}
  </select>
</mapper>