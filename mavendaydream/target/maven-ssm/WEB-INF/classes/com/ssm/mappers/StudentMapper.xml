<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ssm.dao.StudentDao">
  <resultMap id="StudentMap" type="com.ssm.pojo.Student">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="STUDENT_ID"  property="studentId" />
    <result column="STUDENT_NAME"  property="studentName" />
    <result column="CLASS_ID"  property="classId" />
    <result column="CLASS_NAME"  property="className" />
    <result column="STUDENT_SEX"  property="studentSex" />
    <result column="STUDENT_SCHOOL"  property="studentSchool" />
    <result column="STUDENT_EDUCATION"  property="studentEducation" />
    <result column="STUDENT_MAJOR"  property="studentMajor" />
    <result column="STUDENT_NATIVE"  property="studentNative" />
    <result column="STUDENT_TEL"  property="studentTel" />
    <result column="STUDENT_QQ"  property="studentQq" />
    <!-- 一对一 -->
    <!--<association property="className" column="CLASS_ID" select="com.ssm.mappers.ClasssMapper.getClassNameById" />-->
  <!-- 一对多-->
    <!--<collection property="className" column="CLASS_ID"  select="com.ssm.mappers.ClasssMapper.getClassNameById"></collection>-->
  </resultMap>
  <select id="getStuList" resultMap="StudentMap" >
    select s.*,c.class_name from classs c, student s where c.class_id = s.class_id
  </select>
  <delete id="delStuById" parameterType="java.lang.Integer">
    delete from STUDENT
    where STUDENT_ID = #{studentId}
  </delete>
  <insert id="addStu" parameterType="com.ssm.pojo.Student">
    insert into STUDENT (STUDENT_ID, STUDENT_NAME, CLASS_ID,
      STUDENT_SEX, STUDENT_SCHOOL, STUDENT_EDUCATION, 
      STUDENT_MAJOR, STUDENT_NATIVE, STUDENT_TEL, 
      STUDENT_QQ)
    values (seq_student_id.nextval, #{studentName}, #{classId},
      #{studentSex}, #{studentSchool}, #{studentEducation},
      #{studentMajor}, #{studentNative}, #{studentTel}, #{studentQq})
  </insert>
  <update id="updateStu" parameterType="com.ssm.pojo.Student">
    update STUDENT
    <set>
      <if test="studentName != null">
        STUDENT_NAME = #{studentName},
      </if>
      <if test="classId != null">
        CLASS_ID = #{classId},
      </if>
      <if test="studentSex != null">
        STUDENT_SEX = #{studentSex},
      </if>
      <if test="studentSchool != null">
        STUDENT_SCHOOL = #{studentSchool},
      </if>
      <if test="studentEducation != null">
        STUDENT_EDUCATION = #{studentEducation},
      </if>
      <if test="studentMajor != null">
        STUDENT_MAJOR = #{studentMajor},
      </if>
      <if test="studentNative != null">
        STUDENT_NATIVE = #{studentNative},
      </if>
      <if test="studentTel != null">
        STUDENT_TEL = #{studentTel},
      </if>
      <if test="studentQq != null">
        STUDENT_QQ = #{studentQq},
      </if>
    </set>
    where STUDENT_ID = #{studentId}
  </update>
  <select id="getStuById" parameterType="java.lang.Integer" resultMap="StudentMap">
    select * from student where student_id=#{studentId}
  </select>
  <select id="getStuByName" parameterType="java.lang.String" resultType="com.ssm.pojo.Student" >
    select * from student where student_Name=#{studentName}
  </select>
  <select id="getStuByClass" parameterType="java.lang.Integer" resultMap="StudentMap" >
    select s.*,c.class_name from classs c, student s where c.class_id = s.class_id and s.class_id=#{classId}
  </select>
</mapper>